<div class="px-[12.5%] md:px-[25%] bg-linear-65 from-gray-100 via-white-100 to-gray-100 py-6">
  <div class="mb-8">
    <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 px-2 sm:px-4 flex items-center">
      <span class="text-sm font-normal bg-green-100 text-green-800 px-2 py-1 rounded-full">{{availableParking.length}}</span>
      <span class="ml-2">Dostępne</span>
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 p-4">
      @for (parking of availableParking; track parking.id) {
        <div class="shadow-lg rounded-lg p-0 border border-green-500 overflow-hidden h-40 flex flex-col hover:shadow-2xl transition-all duration-300 cursor-pointer"
             (click)="openMapModal(parking)">
          <div class="p-3 text-center bg-gray-50">
            <p class="text-lg font-semibold text-gray-900 truncate">{{ parking.name }}</p>
          </div>
          <div class="border-t border-b border-gray-200 flex-grow flex items-center justify-center p-2">
            <p class="text-gray-700 text-center">
              <span class="block">Wolne miejsca:</span>
              <span class="font-bold text-xl text-green-600">{{ parking.availableSpots }}</span>
            </p>
          </div>
          <div class="p-2 text-center bg-gray-50">
            <p class="text-gray-600 text-sm truncate">{{ parking.address }}</p>
          </div>
        </div>
      } @empty {
        <p class="col-span-4 text-center text-gray-600 py-8 italic">Aktualnie brak dostępnych parkingów.</p>
      }
    </div>
  </div>

  <div class="border-t-2 border-gray-300 my-6 mx-4"></div>

  <div>
    <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 px-2 sm:px-4 flex items-center">
      <span class="text-sm font-normal bg-red-100 text-red-800 px-2 py-1 rounded-full">{{unavailableParking.length}}</span>
      <span class="ml-2">Niedostępne/brak danych:</span>
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 p-4">
      @for (parking of unavailableParking; track parking.id) {
        <div class="shadow-lg rounded-lg p-0 border border-red-200 overflow-hidden h-40 flex flex-col hover:shadow-2xl transition-all duration-300 cursor-pointer opacity-80"
             (click)="openMapModal(parking)">
          <div class="p-3 text-center bg-gray-50">
            <p class="text-lg font-semibold text-gray-900 truncate">{{ parking.name }}</p>
          </div>
          <div class="border-t border-b border-gray-200 flex-grow flex items-center justify-center p-2">
            <p class="text-gray-700 text-center">
              <span class="block">Wolne miejsca:</span>
              <span class="font-bold text-xl text-red-500">{{ parking.availableSpots }}</span>
            </p>
          </div>
          <div class="p-2 text-center bg-gray-50">
            <p class="text-gray-600 text-sm truncate">{{ parking.address }}</p>
          </div>
        </div>
      } @empty {
        <p class="col-span-4 text-center text-gray-600 py-8 italic">Wszystkie parkingi mają wolne miejsca.</p>
      }
    </div>
  </div>
</div>

@if (isMapModalOpen) {
  <div class="fixed inset-0 glass flex items-center justify-center p-4 z-50" (click)="isMapModalOpen = false">
    <div class=" glass-map py-4 sm:py-6 px-3 sm:px-4 rounded-lg shadow-lg relative w-full sm:w-11/12 md:w-4/5 lg:w-3/4 max-h-[90vh] overflow-y-auto cursor-default"
         (click)="$event.stopPropagation()">
      <button class="absolute top-2 right-2 text-2xl sm:text-3xl leading-none p-2 cursor-pointer z-10 hover:bg-gray-200 rounded-full transition-colors" (click)="closeModal()">×</button>

      <h2 class="text-center text-xl sm:text-2xl md:text-3xl font-bold italic pb-2 pr-8">{{ selectedMapParking?.name }}</h2>

      <div id="map" class="w-full h-[250px] sm:h-[350px] md:h-[400px] lg:h-[500px] flex items-center justify-center"></div>

      <p class="text-indigo-950 pt-3 sm:pt-4 italic text-center text-sm sm:text-base">
        Adres udostępniony przez UM w Gdańsku:
        <span class="block mt-1 font-medium">{{ selectedMapParking?.address }}</span>
      </p>
    </div>
  </div>
}
